"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const console_state_1 = require("./console-state");
let originalConsole;
let consoleState;
let mockConsoleOptions;
let consoleProxyHandler = {
    get(target, propKey) {
        const method = propKey;
        const originalMethod = target[method];
        return function (...args) {
            consoleState.record(method, args[0]);
            if (mockConsoleOptions !== undefined && mockConsoleOptions.suppressOutput) {
                originalMethod.apply(originalConsole, args);
            }
        };
    },
};
function mockConsole(options) {
    originalConsole = console;
    consoleState = new console_state_1.default();
    mockConsoleOptions = options;
    console = new Proxy(console, consoleProxyHandler);
    return { resetConsole, consoleState };
}
exports.default = mockConsole;
function resetConsole() {
    console = originalConsole;
}
exports.resetConsole = resetConsole;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9jay1jb25zb2xlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vc3JjL21vY2stY29uc29sZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLG1EQUEyQztBQUUzQyxJQUFJLGVBQW9CLENBQUM7QUFDekIsSUFBSSxZQUEwQixDQUFDO0FBQy9CLElBQUksa0JBQWtELENBQUM7QUFFdkQsSUFBSSxtQkFBbUIsR0FBbUM7SUFDeEQsR0FBRyxDQUFDLE1BQU0sRUFBRSxPQUFvQjtRQUM5QixNQUFNLE1BQU0sR0FBVyxPQUFPLENBQUM7UUFDL0IsTUFBTSxjQUFjLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXRDLE9BQU8sVUFBUyxHQUFHLElBQVc7WUFDNUIsWUFBWSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFckMsSUFBSSxrQkFBa0IsS0FBSyxTQUFTLElBQUksa0JBQWtCLENBQUMsY0FBYyxFQUFFO2dCQUN6RSxjQUFjLENBQUMsS0FBSyxDQUFDLGVBQWUsRUFBRSxJQUFJLENBQUMsQ0FBQzthQUM3QztRQUNILENBQUMsQ0FBQztJQUNKLENBQUM7Q0FDRixDQUFDO0FBRUYsU0FBd0IsV0FBVyxDQUFDLE9BQTRCO0lBQzlELGVBQWUsR0FBRyxPQUFPLENBQUM7SUFDMUIsWUFBWSxHQUFHLElBQUksdUJBQVksRUFBRSxDQUFDO0lBQ2xDLGtCQUFrQixHQUFHLE9BQU8sQ0FBQztJQUU3QixPQUFPLEdBQUcsSUFBSSxLQUFLLENBQUMsT0FBTyxFQUFFLG1CQUFtQixDQUFDLENBQUM7SUFFbEQsT0FBTyxFQUFFLFlBQVksRUFBRSxZQUFZLEVBQUUsQ0FBQztBQUN4QyxDQUFDO0FBUkQsOEJBUUM7QUFFRCxTQUFnQixZQUFZO0lBQzFCLE9BQU8sR0FBRyxlQUFlLENBQUM7QUFDNUIsQ0FBQztBQUZELG9DQUVDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5kZXhhYmxlQ29uc29sZSwgTW9ja0NvbnNvbGUsIE1vY2tDb25zb2xlT3B0aW9ucyB9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IENvbnNvbGVTdGF0ZSBmcm9tICcuL2NvbnNvbGUtc3RhdGUnO1xuXG5sZXQgb3JpZ2luYWxDb25zb2xlOiBhbnk7XG5sZXQgY29uc29sZVN0YXRlOiBDb25zb2xlU3RhdGU7XG5sZXQgbW9ja0NvbnNvbGVPcHRpb25zOiBNb2NrQ29uc29sZU9wdGlvbnMgfCB1bmRlZmluZWQ7XG5cbmxldCBjb25zb2xlUHJveHlIYW5kbGVyOiBQcm94eUhhbmRsZXI8SW5kZXhhYmxlQ29uc29sZT4gPSB7XG4gIGdldCh0YXJnZXQsIHByb3BLZXk6IFByb3BlcnR5S2V5KSB7XG4gICAgY29uc3QgbWV0aG9kID0gPHN0cmluZz5wcm9wS2V5O1xuICAgIGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gdGFyZ2V0W21ldGhvZF07XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oLi4uYXJnczogYW55W10pIHtcbiAgICAgIGNvbnNvbGVTdGF0ZS5yZWNvcmQobWV0aG9kLCBhcmdzWzBdKTtcblxuICAgICAgaWYgKG1vY2tDb25zb2xlT3B0aW9ucyAhPT0gdW5kZWZpbmVkICYmIG1vY2tDb25zb2xlT3B0aW9ucy5zdXBwcmVzc091dHB1dCkge1xuICAgICAgICBvcmlnaW5hbE1ldGhvZC5hcHBseShvcmlnaW5hbENvbnNvbGUsIGFyZ3MpO1xuICAgICAgfVxuICAgIH07XG4gIH0sXG59O1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtb2NrQ29uc29sZShvcHRpb25zPzogTW9ja0NvbnNvbGVPcHRpb25zKTogTW9ja0NvbnNvbGUge1xuICBvcmlnaW5hbENvbnNvbGUgPSBjb25zb2xlO1xuICBjb25zb2xlU3RhdGUgPSBuZXcgQ29uc29sZVN0YXRlKCk7XG4gIG1vY2tDb25zb2xlT3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgY29uc29sZSA9IG5ldyBQcm94eShjb25zb2xlLCBjb25zb2xlUHJveHlIYW5kbGVyKTtcblxuICByZXR1cm4geyByZXNldENvbnNvbGUsIGNvbnNvbGVTdGF0ZSB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRDb25zb2xlKCk6IHZvaWQge1xuICBjb25zb2xlID0gb3JpZ2luYWxDb25zb2xlO1xufVxuIl19